# 7.Network
## 7.1 通信プロトコルの標準化
### 7.1.1 OSI基本参照モデル

- (レイヤ7) アプリケーション層

やりとりされたデータの意味内容を直接取り扱う
SMTP(メール)、HTTP(Webアクセス)などアプリケーション特化のプロトコル。

- (レイヤ6) プレゼンテーション層

データの表現形式を管理
文字コード(UTF-８, SHIFT-JIS, etc)や圧縮(zip, rar)等のデータの特性を規定。

- (レイヤ5) セッション層

最終的な通信の目的に合わせて、データの送受信管理を行うコネクション確立・データ転送のタイミング管理を行い、特性の異なる通信の差異を吸収。

- (レイヤ4) トランスポート層

エラーの検出、再送などデータ転送の制御により、通信の品質を保証。
ノード内のアプリケーションを特定、TCPやUDPが該当。

- (レイヤ3) ネットワーク層

エンドtoエンドのやりとりを規定。
ネットワークアドレスはノードに対して付与。

IPアドレスは、通信の最初から最後まで一貫したアドレス。

- (レイヤ2) データリンク層

同じネットワークに接続された隣接されたノード間の通信について規定。
HDLC(High-Level Data Link Control)手順やMACフレームの規格が該当。

- (レイヤ1) 物理層

最下位に位置し、システムの物理的、電気的な性質を規定。

---

### 7.1.2 TCP/IP

<span style="color: #d33;">TCP/IPの実体は、ネットワーク層のプロトコルであるIPを中心した
**プロトコル郡(プロトコルスイート)**</span>である。

<table>
<tr><th>OSI基本参照モデル</th><th>TCP/IPの階層</th><th>実装例</th></tr>
<tr><td>アプリケーション層</td><td rowspan="3">アプリケーション層</td><td rowspan="3">HTTP, SMTP, FTP, DHCP, DNS, SNMP, POP3,Telnet</td></tr>
<tr><td>プレゼンテーション層</td></tr>
<tr><td>セッション層</td></tr>
<tr><td>トランスポート層</td><td>トランスポート層</td><td>TCP, UDP</td></tr>
<tr><td>ネットワーク層</td><td>インターネット層</td><td>IP, ICMP など</td></tr>
<tr><td>データリンク層</td><td rowspan="2">ネットワークインターフェース層</td><td rowspan="2">イーサネット </td></tr>
<tr><td>物理層</td></tr>
</table>

<!--  
| OSI基本参照モデル  | TCP/IPの階層     | 実装例          |
| :----------------- | :--------------- | :-------------- |
| アプリケーション層   |                  | HTTP, SMTP, FTP, |
| プレゼンテーション層 | アプリケーション層 | DHCP, DNS, SNMP, |
| セッション層         |                 |  POP3,Telnet     |
| トランスポート層     | トランスポート層   |  TCP, UDP        |
| ネットワーク層       | インターネット層   |  IP, ICMP など   |
| データリンク層      | ネットワーク       |                  |
| 物理層             | インターフェース層 |  イーサネット      |
-->

#### TCP/IPの通信

TCP/IPは**パケット方式**。

データをパケットに区切り、ヘッダを付けて送信。

ヘッダには、送信先や送信元、大きさ、順番などデータに関する情報が付与される。

<table>
<tr><td colspan="4" style="text-align: right;">メールなどのデータ（パケット）</td><td>アプリケーション層</td></tr>

<tr><td colspan="3" style="text-align: right;">TCP</td><td style="text-align: right;">メールなどのデータ（パケット）</td><td>トランスポート層</td></tr>

<tr><td colspan="2" style="text-align: right;">IP</td><td style="text-align: right;">TCP</td><td>メールなどのデータ（パケット</td><td>ネットワーク層</td></tr>

<tr><td>MAC</td><td>IP</td><td>TCP</td><td>メールなどのデータ（パケット）</td><td>データリンク層</td></tr>
</table>

下層に行くほど、ヘッダが追加されていく。

##### ヘッダを付加したパケットの呼び名
- TCPセグメント

ポート番号によって、トランスポート層の通信を行うTCPヘッダを付加したパケット

- IPパケット

IPアドレスによって、ネットワーク層の通信を行うIPヘッダを付加したパケット

- MACフレーム

MACアドレスによって、データリンク層の通信を行うMACアドレスを付加したパケット

---
